--
-- PostgreSQL database dump
--

SET statement_timeout = 0;
SET lock_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;

--
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


--
-- Name: uuid-ossp; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS "uuid-ossp" WITH SCHEMA public;


--
-- Name: EXTENSION "uuid-ossp"; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION "uuid-ossp" IS 'generate universally unique identifiers (UUIDs)';


SET search_path = public, pg_catalog;

--
-- Name: permission; Type: TYPE; Schema: public; Owner: Satyam
--

CREATE TYPE permission AS ENUM (
    'user',
    'admin'
);


ALTER TYPE public.permission OWNER TO "Satyam";

SET default_tablespace = '';

SET default_with_oids = false;

--
-- Name: account; Type: TABLE; Schema: public; Owner: Satyam; Tablespace: 
--

CREATE TABLE account (
    account_id integer NOT NULL,
    name text NOT NULL,
    email text NOT NULL,
    password_hash text NOT NULL,
    created_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,
    token_expires_at timestamp with time zone DEFAULT (now() + '7 days'::interval),
    token text DEFAULT md5((random())::text),
    permission permission DEFAULT 'user'::permission NOT NULL
);


ALTER TABLE public.account OWNER TO "Satyam";

--
-- Name: account_account_id_seq; Type: SEQUENCE; Schema: public; Owner: Satyam
--

CREATE SEQUENCE account_account_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.account_account_id_seq OWNER TO "Satyam";

--
-- Name: account_account_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: Satyam
--

ALTER SEQUENCE account_account_id_seq OWNED BY account.account_id;


--
-- Name: app; Type: TABLE; Schema: public; Owner: Satyam; Tablespace: 
--

CREATE TABLE app (
    bundle_id text NOT NULL,
    uuid uuid DEFAULT uuid_generate_v4(),
    private boolean DEFAULT false,
    password_hash text,
    name text NOT NULL,
    account_id integer,
    app_id integer NOT NULL,
    created_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,
    CONSTRAINT app_bundle_id_length_check CHECK ((char_length(bundle_id) > 0)),
    CONSTRAINT app_name_length_check CHECK ((char_length(name) > 0))
);


ALTER TABLE public.app OWNER TO "Satyam";

--
-- Name: app_app_id_seq; Type: SEQUENCE; Schema: public; Owner: Satyam
--

CREATE SEQUENCE app_app_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.app_app_id_seq OWNER TO "Satyam";

--
-- Name: app_app_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: Satyam
--

ALTER SEQUENCE app_app_id_seq OWNED BY app.app_id;


--
-- Name: build; Type: TABLE; Schema: public; Owner: Satyam; Tablespace: 
--

CREATE TABLE build (
    build_number text NOT NULL,
    version text NOT NULL,
    download_count integer DEFAULT 0,
    bundle_id text NOT NULL,
    build_id integer NOT NULL,
    downloaded_last_at timestamp with time zone,
    created_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,
    account_id integer,
    CONSTRAINT build_downloaded_last_at_timezone_utc CHECK ((date_part('timezone'::text, downloaded_last_at) = 0::double precision)),
    CONSTRAINT build_uploaded_at_timezone_utc CHECK ((date_part('timezone'::text, created_at) = 0::double precision))
);


ALTER TABLE public.build OWNER TO "Satyam";

--
-- Name: build_build_id_seq; Type: SEQUENCE; Schema: public; Owner: Satyam
--

CREATE SEQUENCE build_build_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.build_build_id_seq OWNER TO "Satyam";

--
-- Name: build_build_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: Satyam
--

ALTER SEQUENCE build_build_id_seq OWNED BY build.build_id;


--
-- Name: account_id; Type: DEFAULT; Schema: public; Owner: Satyam
--

ALTER TABLE ONLY account ALTER COLUMN account_id SET DEFAULT nextval('account_account_id_seq'::regclass);


--
-- Name: app_id; Type: DEFAULT; Schema: public; Owner: Satyam
--

ALTER TABLE ONLY app ALTER COLUMN app_id SET DEFAULT nextval('app_app_id_seq'::regclass);


--
-- Name: build_id; Type: DEFAULT; Schema: public; Owner: Satyam
--

ALTER TABLE ONLY build ALTER COLUMN build_id SET DEFAULT nextval('build_build_id_seq'::regclass);


--
-- Data for Name: account; Type: TABLE DATA; Schema: public; Owner: Satyam
--

COPY account (account_id, name, email, password_hash, created_at, token_expires_at, token, permission) FROM stdin;
28	Satyam.io	sghodas@gmail.com	$2a$10$tVs0wJLjvPN8vwlhrFrK8ORoa1NYZdfBTYc.uVU8c9HgJ4dk5yFWq	2014-06-20 05:15:47.528103+00	2014-06-27 19:05:14.014+00	305dad35636be58edbdee6a8ab3eb310	user
31	Satyam	sghod1212@gmail.com	$2a$10$bIZW2dDYv1bWJ8.BO8kH6uI66wgR.rkTBt0B2Ezae.ndQu8BhNmsa	2014-06-21 21:02:41.983332+00	2014-06-28 21:02:41.983332+00	427a1aaa00477a78ed081c0aa0039112	user
\.


--
-- Name: account_account_id_seq; Type: SEQUENCE SET; Schema: public; Owner: Satyam
--

SELECT pg_catalog.setval('account_account_id_seq', 32, true);


--
-- Data for Name: app; Type: TABLE DATA; Schema: public; Owner: Satyam
--

COPY app (bundle_id, uuid, private, password_hash, name, account_id, app_id, created_at) FROM stdin;
io.Satyam.Overlayer	96289612-6765-44a7-a92d-f0a602594932	f	\N	Overlayer	28	22	2014-06-25 04:31:35.317464+00
io.Satyam.Overlayer-Calculator	057d8cb2-055e-47fc-a394-1ee84cb45e2d	f	\N	Overlayer Calculator	\N	23	2014-06-26 04:47:56.024039+00
\.


--
-- Name: app_app_id_seq; Type: SEQUENCE SET; Schema: public; Owner: Satyam
--

SELECT pg_catalog.setval('app_app_id_seq', 23, true);


--
-- Data for Name: build; Type: TABLE DATA; Schema: public; Owner: Satyam
--

COPY build (build_number, version, download_count, bundle_id, build_id, downloaded_last_at, created_at, account_id) FROM stdin;
\.


--
-- Name: build_build_id_seq; Type: SEQUENCE SET; Schema: public; Owner: Satyam
--

SELECT pg_catalog.setval('build_build_id_seq', 51, true);


--
-- Name: account_email_key; Type: CONSTRAINT; Schema: public; Owner: Satyam; Tablespace: 
--

ALTER TABLE ONLY account
    ADD CONSTRAINT account_email_key UNIQUE (email);


--
-- Name: account_pkey; Type: CONSTRAINT; Schema: public; Owner: Satyam; Tablespace: 
--

ALTER TABLE ONLY account
    ADD CONSTRAINT account_pkey PRIMARY KEY (account_id);


--
-- Name: app_app_id_key; Type: CONSTRAINT; Schema: public; Owner: Satyam; Tablespace: 
--

ALTER TABLE ONLY app
    ADD CONSTRAINT app_app_id_key UNIQUE (app_id);


--
-- Name: app_pkey; Type: CONSTRAINT; Schema: public; Owner: Satyam; Tablespace: 
--

ALTER TABLE ONLY app
    ADD CONSTRAINT app_pkey PRIMARY KEY (bundle_id);


--
-- Name: app_uuid_unique_check; Type: CONSTRAINT; Schema: public; Owner: Satyam; Tablespace: 
--

ALTER TABLE ONLY app
    ADD CONSTRAINT app_uuid_unique_check UNIQUE (uuid);


--
-- Name: build_build_id_key; Type: CONSTRAINT; Schema: public; Owner: Satyam; Tablespace: 
--

ALTER TABLE ONLY build
    ADD CONSTRAINT build_build_id_key UNIQUE (build_id);


--
-- Name: build_pkey; Type: CONSTRAINT; Schema: public; Owner: Satyam; Tablespace: 
--

ALTER TABLE ONLY build
    ADD CONSTRAINT build_pkey PRIMARY KEY (build_number);


--
-- Name: app_account_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: Satyam
--

ALTER TABLE ONLY app
    ADD CONSTRAINT app_account_id_fkey FOREIGN KEY (account_id) REFERENCES account(account_id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- Name: build_account_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: Satyam
--

ALTER TABLE ONLY build
    ADD CONSTRAINT build_account_id_fkey FOREIGN KEY (account_id) REFERENCES account(account_id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- Name: build_bundle_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: Satyam
--

ALTER TABLE ONLY build
    ADD CONSTRAINT build_bundle_id_fkey FOREIGN KEY (bundle_id) REFERENCES app(bundle_id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- Name: public; Type: ACL; Schema: -; Owner: Satyam
--

REVOKE ALL ON SCHEMA public FROM PUBLIC;
REVOKE ALL ON SCHEMA public FROM "Satyam";
GRANT ALL ON SCHEMA public TO "Satyam";
GRANT ALL ON SCHEMA public TO PUBLIC;


--
-- Name: account; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL ON TABLE account FROM PUBLIC;
REVOKE ALL ON TABLE account FROM "Satyam";
GRANT ALL ON TABLE account TO "Satyam";
GRANT SELECT,DELETE ON TABLE account TO appdrop;


--
-- Name: account.name; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL(name) ON TABLE account FROM PUBLIC;
REVOKE ALL(name) ON TABLE account FROM "Satyam";
GRANT INSERT(name),UPDATE(name) ON TABLE account TO appdrop;


--
-- Name: account.email; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL(email) ON TABLE account FROM PUBLIC;
REVOKE ALL(email) ON TABLE account FROM "Satyam";
GRANT INSERT(email),UPDATE(email) ON TABLE account TO appdrop;


--
-- Name: account.password_hash; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL(password_hash) ON TABLE account FROM PUBLIC;
REVOKE ALL(password_hash) ON TABLE account FROM "Satyam";
GRANT INSERT(password_hash),UPDATE(password_hash) ON TABLE account TO appdrop;


--
-- Name: account.created_at; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL(created_at) ON TABLE account FROM PUBLIC;
REVOKE ALL(created_at) ON TABLE account FROM "Satyam";
GRANT SELECT(created_at) ON TABLE account TO appdrop;


--
-- Name: account.token_expires_at; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL(token_expires_at) ON TABLE account FROM PUBLIC;
REVOKE ALL(token_expires_at) ON TABLE account FROM "Satyam";
GRANT UPDATE(token_expires_at) ON TABLE account TO appdrop;


--
-- Name: account.token; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL(token) ON TABLE account FROM PUBLIC;
REVOKE ALL(token) ON TABLE account FROM "Satyam";
GRANT SELECT(token),UPDATE(token) ON TABLE account TO appdrop;


--
-- Name: account.permission; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL(permission) ON TABLE account FROM PUBLIC;
REVOKE ALL(permission) ON TABLE account FROM "Satyam";
GRANT SELECT(permission) ON TABLE account TO appdrop;


--
-- Name: account_account_id_seq; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL ON SEQUENCE account_account_id_seq FROM PUBLIC;
REVOKE ALL ON SEQUENCE account_account_id_seq FROM "Satyam";
GRANT ALL ON SEQUENCE account_account_id_seq TO "Satyam";
GRANT SELECT,USAGE ON SEQUENCE account_account_id_seq TO appdrop;


--
-- Name: app; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL ON TABLE app FROM PUBLIC;
REVOKE ALL ON TABLE app FROM "Satyam";
GRANT ALL ON TABLE app TO "Satyam";
GRANT SELECT,DELETE ON TABLE app TO appdrop;


--
-- Name: app.bundle_id; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL(bundle_id) ON TABLE app FROM PUBLIC;
REVOKE ALL(bundle_id) ON TABLE app FROM "Satyam";
GRANT INSERT(bundle_id),UPDATE(bundle_id) ON TABLE app TO appdrop;


--
-- Name: app.private; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL(private) ON TABLE app FROM PUBLIC;
REVOKE ALL(private) ON TABLE app FROM "Satyam";
GRANT INSERT(private),UPDATE(private) ON TABLE app TO appdrop;


--
-- Name: app.password_hash; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL(password_hash) ON TABLE app FROM PUBLIC;
REVOKE ALL(password_hash) ON TABLE app FROM "Satyam";
GRANT INSERT(password_hash),UPDATE(password_hash) ON TABLE app TO appdrop;


--
-- Name: app.name; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL(name) ON TABLE app FROM PUBLIC;
REVOKE ALL(name) ON TABLE app FROM "Satyam";
GRANT INSERT(name),UPDATE(name) ON TABLE app TO appdrop;


--
-- Name: app.account_id; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL(account_id) ON TABLE app FROM PUBLIC;
REVOKE ALL(account_id) ON TABLE app FROM "Satyam";
GRANT INSERT(account_id),UPDATE(account_id) ON TABLE app TO appdrop;


--
-- Name: app.created_at; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL(created_at) ON TABLE app FROM PUBLIC;
REVOKE ALL(created_at) ON TABLE app FROM "Satyam";
GRANT SELECT(created_at) ON TABLE app TO appdrop;


--
-- Name: app_app_id_seq; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL ON SEQUENCE app_app_id_seq FROM PUBLIC;
REVOKE ALL ON SEQUENCE app_app_id_seq FROM "Satyam";
GRANT ALL ON SEQUENCE app_app_id_seq TO "Satyam";
GRANT SELECT,USAGE ON SEQUENCE app_app_id_seq TO appdrop;


--
-- Name: build; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL ON TABLE build FROM PUBLIC;
REVOKE ALL ON TABLE build FROM "Satyam";
GRANT ALL ON TABLE build TO "Satyam";
GRANT SELECT,INSERT,DELETE,UPDATE ON TABLE build TO appdrop;


--
-- Name: build.build_number; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL(build_number) ON TABLE build FROM PUBLIC;
REVOKE ALL(build_number) ON TABLE build FROM "Satyam";
GRANT INSERT(build_number) ON TABLE build TO appdrop;


--
-- Name: build.version; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL(version) ON TABLE build FROM PUBLIC;
REVOKE ALL(version) ON TABLE build FROM "Satyam";
GRANT INSERT(version) ON TABLE build TO appdrop;


--
-- Name: build.download_count; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL(download_count) ON TABLE build FROM PUBLIC;
REVOKE ALL(download_count) ON TABLE build FROM "Satyam";
GRANT UPDATE(download_count) ON TABLE build TO appdrop;


--
-- Name: build.bundle_id; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL(bundle_id) ON TABLE build FROM PUBLIC;
REVOKE ALL(bundle_id) ON TABLE build FROM "Satyam";
GRANT INSERT(bundle_id) ON TABLE build TO appdrop;


--
-- Name: build.downloaded_last_at; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL(downloaded_last_at) ON TABLE build FROM PUBLIC;
REVOKE ALL(downloaded_last_at) ON TABLE build FROM "Satyam";
GRANT INSERT(downloaded_last_at),UPDATE(downloaded_last_at) ON TABLE build TO appdrop;


--
-- Name: build.created_at; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL(created_at) ON TABLE build FROM PUBLIC;
REVOKE ALL(created_at) ON TABLE build FROM "Satyam";
GRANT INSERT(created_at) ON TABLE build TO appdrop;


--
-- Name: build_build_id_seq; Type: ACL; Schema: public; Owner: Satyam
--

REVOKE ALL ON SEQUENCE build_build_id_seq FROM PUBLIC;
REVOKE ALL ON SEQUENCE build_build_id_seq FROM "Satyam";
GRANT ALL ON SEQUENCE build_build_id_seq TO "Satyam";
GRANT SELECT,USAGE ON SEQUENCE build_build_id_seq TO appdrop;


--
-- PostgreSQL database dump complete
--

